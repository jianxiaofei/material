<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Document</title>
    <style>
    body {
        text-align: center;
    }

    img {
        max-width: 500px;
        height: 200px;
    }
    </style>
</head>

<body>
    <div id="img-wrap">
        <img id="img" src="" alt="">
    </div>
    <div id="btn-wrap">
        <button id="btn-prev">上一张</button>
        <button id="btn-next">下一张</button>
    </div>
    <script>
        /*{
        title:"dsfasdf",
        content_type:"1",
        content_desc: ["https://www.longmaster.com.cn/templates/lmweb/images/1-04.jpg",
            "https://www.longmaster.com.cn/templates/lmweb/images/2-04.jpg",
            "https://www.longmaster.com.cn/templates/lmweb/images/3-04.jpg",
            "https://www.longmaster.com.cn/templates/lmweb/images/4-04.jpg"
        ]

    },{
        title:"12312312",
        content_type:"1",
        content_desc: ["http://pic1.win4000.com/wallpaper/f/51c3bb99a21ea.jpg",
            "https://jxfdemo.github.io/material/static/image/banner01.jpg",
            "https://jxfdemo.github.io/material/static/image/banner02.jpg",
            "https://jxfdemo.github.io/material/static/image/banner03.jpg",
            "https://jxfdemo.github.io/material/static/image/banner04.jpg"
        ]

    }
    */
    var httpImg = ["https://www.longmaster.com.cn/templates/lmweb/images/1-04.jpg",
        "https://www.longmaster.com.cn/templates/lmweb/images/2-04.jpg",
        "https://www.longmaster.com.cn/templates/lmweb/images/3-04.jpg",
        "https://www.longmaster.com.cn/templates/lmweb/images/4-04.jpg"
    ];
    var btn_wrap = document.getElementById('btn-wrap');
    var img_wrap = document.getElementById('img-wrap');
    var count = 0;
    var loader = [];

    function renderImg(ID) {
        function currentCount() {
            return count = ID == 'btn-prev' ? Math.max(1, count -= 1) : Math.min(httpImg.length, count += 1);
        }

        function replaceDom() {
            currentCount()
            var timer = setInterval(function() {
                if (loader[count - 1].complete) {
                    img_wrap.replaceChild(loader[count - 1],img_wrap.firstElementChild);
                    clearInterval(timer)
                } else {
                    var str = document.createElement('p');
                    str.innerText = "正在加载……"
                    img_wrap.replaceChild(str,img_wrap.firstElementChild);
                    return false;
                }
            }, 50)
        }

        function preloaderImg() {
            loader.length < httpImg.length && createImg(count);
        }
        replaceDom();
        preloaderImg();
    }

    function createImg(count) {
        var img = new Image();
        count < httpImg.length && count >= 0 && (img.src = httpImg[count]);
        loader.push(img);
    }
    createImg(count);
    btn_wrap.addEventListener('click', function(e) {
        renderImg(e.target.id);
    }, true);
    </script>
</body>

</html>